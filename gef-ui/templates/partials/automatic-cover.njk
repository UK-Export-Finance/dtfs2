{% extends "index.njk" %}
{% from "govuk/components/error-summary/macro.njk" import govukErrorSummary %}
{% from "govuk/components/radios/macro.njk" import govukRadios %}
{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "govuk/components/details/macro.njk" import govukDetails %}

{% block pageTitle %}Automatic cover{% endblock %}

{% block content %}
  {% if errors %}
    {{ govukErrorSummary({
      titleText: "There is a problem",
      errorList: errors.errorSummary,
      attributes: {
        'data-cy': 'error-summary'
      }
    }) }}
  {% endif %}


  <h1 class="govuk-heading-l" data-cy="main-heading">
    Check if this is eligible for automatic cover
  </h1>

  {{ govukDetails({
    summaryText: "What is automatic cover?",
    text: "If you’re eligible for automatic cover, you can submit all the application details as an automatic inclusion notice (AIN). Once you’ve submitted the AIN, your cover will be available immediately for you to use."
  }) }}

  <form
    method="post"
    data-cy="form">
    {{ govukRadios({
      classes: "govuk-radios--inline",
      idPrefix: "confirm",
      name: "mandatoryCriteria",
      fieldset: {
        legend: {
          text: "Can you confirm that the mandatory criteria will be true for this General Export Facility?",
          isPageHeading: false,
          classes: "govuk-fieldset__legend--s"
        }
      },
      errorMessage: errors and {
        text: errors.fieldErrors.confirm.text,
        attributes: {
          'data-cy': 'mandatory-criteria-error'
        }
      },
      items: [
        {
          value: true,
          text: "Yes",
          attributes: {
            'data-cy': 'mandatory-criteria-yes'
          }
        },
        {
          value: false,
          text: "No",
          attributes: {
            'data-cy': 'mandatory-criteria-no'
          }
        }
      ] }) 
    }}

    <div class="govuk-button-group">
      {{ govukButton({
        text: "Continue"
      }) }}

      <a
        class="govuk-link"
        href="/gef/mandatory-criteria"
        data-cy="cancel-button">Cancel</a>
    </div>
  </form>

{% endblock %}
