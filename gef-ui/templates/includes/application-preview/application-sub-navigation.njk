{%- from "moj/components/sub-navigation/macro.njk" import mojSubNavigation -%}

{% set applicationNotice = 
   {
      text: 'Application/notice',
      href: '/gef/application-details/' + dealId,
      active: (activeSubNavigation=='/'),
      attributes: {
         "data-cy": "application-preview-link"
      }
   }
%}

{% set amendments = 
   {
      text: 'Amendments',
      href: '/gef/application-details/' + dealId + '/all-types-amendments',
      active: (activeSubNavigation == 'amendments'),
      attributes: {
         "data-cy": "application-amendments-link"
      }
   }
%}

{% set activity = 
   {
      text: 'Activity',
      href: '/gef/application-details/' + dealId + '/activities',
      active: (activeSubNavigation=='activities'),
      attributes: {
         "data-cy": "application-activities-link"
      }
   }
%}

{% if isFeatureFlagEnabled %}
   {% set items = [applicationNotice, amendments, activity] %}
{% else %}
   {% set items = [applicationNotice, activity] %}
{% endif %}

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-full">
      {{ mojSubNavigation({
         label: 'Sub navigation',
         items: items,
         attributes: {
          'data-cy': 'application-preview-sub-navigation'
        }
         }) }}
    </div>
  </div>
