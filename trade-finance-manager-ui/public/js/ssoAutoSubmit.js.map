{"version":3,"file":"ssoAutoSubmit.js","mappings":"6BAasBA,EAAUC,EAZ1BC,EAAUC,SAASC,eAAe,6BAClCC,EAAeF,SAASG,cAAc,8BAA8BC,aAAa,sBAyBnFL,IAdkBF,EAcMQ,OAAOC,SAAST,SAdZC,EAcsBE,SAASF,SAZ5C,cAAbD,GAImC,IAAnCC,EAASS,QAAQL,KAIrBM,QAAQC,MAAM,iEAAkEX,GACzE,KAIPC,EAAQW,U","sources":["webpack://DTFS_TFM/./scripts/sso-auto-submit.js"],"sourcesContent":["// TFM UI - SSO support to work around SameSite=Strict\nconst ssoForm = document.getElementById('acceptExternalSsoPostForm');\nconst ssoAuthority = document.querySelector('script[data-sso-authority]').getAttribute('data-sso-authority');\n\n/**\n * safeReferrer\n * Verify referrer, allow empty referrer for localhost.\n * 1) If host is localhost then referrer will be missing, no need to check it\n * 2) Return error message if referrer is missing or it is not from SSO authority\n * @param {string} hostname: website domain\n * @param {string} referrer: from where user is comming from\n * @returns {Boolean} True if form should auto submit.\n */\nconst safeReferrer = (hostname, referrer) => {\n  // Referer can be empty on localhost, because of policy no-referrer-when-downgrade.\n  if (hostname === 'localhost') {\n    return true;\n  }\n\n  if (referrer.indexOf(ssoAuthority) === 0) {\n    return true;\n  }\n\n  console.error('sso auto submit - referrer check failed because referrer is %s', referrer);\n  return false;\n};\n\nif (ssoForm && safeReferrer(window.location.hostname, document.referrer)) {\n  ssoForm.submit();\n}\n"],"names":["hostname","referrer","ssoForm","document","getElementById","ssoAuthority","querySelector","getAttribute","window","location","indexOf","console","error","submit"],"sourceRoot":""}