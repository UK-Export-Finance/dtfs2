{% from "govuk/components/button/macro.njk" import govukButton %}

{% macro render(params) %}
  {% set deal = params.deal %}
  {% set csrfToken = params.csrfToken %}
  {% set facilityId = params.facilityId %}
  {% set showAmendmentButton = params.showAmendmentButton %}
  {% set hasAmendmentInProgress = params.hasAmendmentInProgress %}
  {% set amendmentId = params.amendmentId %}
  {% set amendmentVersion = params.amendmentVersion %}

  <div class="govuk-grid-row" data-cy="amendments">
    <div class="govuk-grid-column-full">
      {% if showAmendmentButton === true %}
        <form method="post" data-cy="form">
          <input type="hidden" name="_csrf" value="{{ csrfToken }}">
          {{ govukButton({
            text: "Add an amendment request",
            attributes: {
              'data-cy': 'amendment--add-amendment-button'
            }
          }) }}
        </form>
      {% elif hasAmendmentInProgress === true %}
        {{ govukButton({
          text: "Continue with amendment request " + amendmentVersion,
          attributes: {
            'data-cy': 'amendment--continue-amendment-button'
          },
          href: facilityId + '/amendment/' + amendmentId + "/request-date"
        }) }}
      {% endif %}
    </div>
  </div>

  <div class="govuk-grid-row separator-line govuk-!-margin-top-53 govuk-!-padding-top-6" data-cy=""> </div>
{% endmacro %}
