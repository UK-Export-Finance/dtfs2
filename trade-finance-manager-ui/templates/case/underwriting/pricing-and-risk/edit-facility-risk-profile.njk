{% from "govuk/components/error-summary/macro.njk" import govukErrorSummary %}
{% from "govuk/components/radios/macro.njk" import govukRadios %}
{% from "govuk/components/button/macro.njk" import govukButton %}

{% extends "index.njk" %}

{% block content %}
  <section class="govuk-!-margin-top-9"> 

    {% if validationErrors.count %}
      {{
        govukErrorSummary({
          titleText: "There is a problem",
          errorList: validationErrors.summary,
          attributes: {
            'data-cy': 'error-summary'
          }
        })
      }}
    {% endif %}

    <div class="govuk-grid-row">

      <div class="govuk-grid-column-three-quarters">

        <div class="govuk-grid-row">
          <div class="govuk-grid-column-one-half">

            <form method="POST" autocomplete="off">


            {{govukRadios({
              fieldset: {
                legend: {
                  text: Whatâ€™s the risk profile for this facility?,
                  isPageHeading: true,
                  classes: "govuk-fieldset__legend--l"
                }
              },
              name: "riskProfile",
              items: [
                {
                  value: "Flat",
                  text: "Flat",
                  attributes: {
                    'data-cy': 'risk-profile-flat'
                  }
                },
                {
                  value: "Variable",
                  text: "Variable",
                  attributes: {
                    'data-cy': 'risk-profile-variable'
                  }
                }
              ],
              errorMessage: validationErrors and {
                text: validationErrors.errorList.exporterCreditRating.text,
                attributes: {
                  'data-cy': 'credit-rating-input-validation-error'
                }
              }
            })
          }}


              {{ govukButton({
                text: "Save",
                attributes: {
                  'data-cy': 'submit-button'
                }
              }) }}

              <a class="govuk-body govuk-link govuk-!-margin-left-6 close-link" href="/case/{{ dealId }}/underwriting/pricing-and-risk" data-cy="close-link">Cancel</a>

            </form>

          </div>

        </div>

      </div>

    </div>

  </section>

{% endblock %}
