{% import './credit-rating-table.njk' as creditRatingTable %}

{% macro render(params) %}
  {% set caseId = params.caseId %}
  {% set supplierName = params.supplierName %}
  {% set exporterCreditRating = params.exporterCreditRating %}

  <section data-cy="section-exporter">

    <h3 class="govuk-heading-l ukef-heading-grey" data-cy="pricing-and-risk-heading">Pricing and risk</h3>

    <h4 class="govuk-heading-l separator-line govuk-!-padding-top-6" data-cy="exporter-heading">Exporter</h4>

    {% if exporterCreditRating %}          

      {% set componentData = {
        caseId: caseId,
        exporterCreditRating: exporterCreditRating
      } %}

      {{ creditRatingTable.render(componentData) }}

    {% else %}

      <p class="govuk-body-l"><a class="govuk-link govuk-link--no-visited-state" href="/case/{{ caseId }}/underwriting/pricing-and-risk/edit" data-cy="add-credit-rating-link">Add a credit rating for {{ supplierName }}</a></p>

    {% endif %}

  </section>

{% endmacro %}
