const { DURABLE_FUNCTIONS_LOG, DEAL_TYPE, CURRENCY } = require('@ukef/dtfs2-common');

const MOCK_ACBS_TASK_LINK = {
  id: '5ce819935e539c343f141ece',
  statusQueryGetUri: 'acbs',
  sendEventPostUri: 'acbs',
  terminatePostUri: 'acbs',
  rewindPostUri: 'acbs',
  purgeHistoryDeleteUri: 'acbs',
};

const MOCK_ACBS_DEAL_LINK = {
  acbsTaskResult: {
    name: 'acbs',
    instanceId: 'c66cd1990aef47c19460257abda5f374',
    runtimeStatus: 'Completed',
    input: {},
    customStatus: null,
    output: {
      portalDealId: '67a5d4aff8bf42e2537ea774',
      ukefDealId: '0020026665',
      deal: {
        parties: {
          exporter: {
            status: 200,
            dataSent: {
              alternateIdentifier: '00322651',
              industryClassification: '2804',
              name1: 'TEST LTD',
              name2: '',
              name3: '',
              smeType: '50',
              citizenshipClass: '1',
              officerRiskDate: '2025-02-07',
              countryCode: 'GBR',
            },
            submittedToACBS: '2025-02-07T09:43:11+00:00',
            receivedFromACBS: '2025-02-07T09:44:23+00:00',
            partyIdentifier: '00296147',
          },
          bank: {
            status: 200,
            dataSent: {
              alternateIdentifier: '00300302',
              industryClassification: '2501',
              smeType: '20',
              citizenshipClass: '1',
              officerRiskDate: '2025-02-07',
              countryCode: 'GBR',
              name1: 'UKEF test bank (Delegated)',
              name2: '',
              name3: '',
            },
            submittedToACBS: '2025-02-07T09:43:11+00:00',
            receivedFromACBS: '2025-02-07T09:44:22+00:00',
            partyIdentifier: '00004333',
          },
          buyer: {
            status: 200,
            dataSent: {
              alternateIdentifier: '00322651',
              industryClassification: '0001',
              smeType: '70',
              citizenshipClass: '2',
              officerRiskDate: '2025-02-07',
              countryCode: 'BRB',
              name1: 'Regression 2.6 AIN',
              name2: '',
              name3: '',
            },
            submittedToACBS: '2025-02-07T09:43:11+00:00',
            receivedFromACBS: '2025-02-07T09:44:22+00:00',
            partyIdentifier: '00296147',
          },
        },
        deal: {
          status: 201,
          dataSent: {
            _id: '67a5d4aff8bf42e2537ea774',
            dealIdentifier: '0020026665',
            currency: 'GBP',
            dealValue: 307500,
            guaranteeCommencementDate: '2025-02-07',
            obligorPartyIdentifier: '00296147',
            obligorName: 'TEST LT',
            obligorIndustryClassification: '2804',
            creditReviewRiskDate: '2025-02-07',
          },
          submittedToACBS: '2025-02-07T09:44:23+00:00',
          receivedFromACBS: '2025-02-07T09:44:31+00:00',
          dealIdentifier: '0020026665',
        },
        investor: {
          status: 201,
          dataSent: {
            effectiveDate: '2025-02-07',
            currency: 'GBP',
            expiryDate: '2050-12-31',
          },
          submittedToACBS: '2025-02-07T09:44:31+00:00',
          receivedFromACBS: '2025-02-07T09:44:32+00:00',
          dealIdentifier: '0020026665',
        },
        guarantee: {
          status: 201,
          dataSent: {
            effectiveDate: '2025-02-07',
            limitKey: '00296147',
            guaranteeExpiryDate: '2028-07-07',
            maximumLiability: 50000,
            guarantorParty: '00000141',
          },
          submittedToACBS: '2025-02-07T09:44:32+00:00',
          receivedFromACBS: '2025-02-07T09:44:33+00:00',
          dealIdentifier: '0020026665',
        },
      },
      facilities: [
        {
          facilityIdentifier: '67a5d4af473bffad2e38f36f',
          facilityStage: '07',
          facilityMaster: {
            status: 201,
            dataSent: {
              _id: '67a5d4aff8bf42e2537ea774',
              dealIdentifier: '0020026665',
              facilityIdentifier: '0020026666',
              dealBorrowerIdentifier: '00296147',
              maximumLiability: 20000,
              productTypeId: '250',
              capitalConversionFactorCode: '1',
              productTypeName: 'BSS/EWCS',
              currency: 'GBP',
              guaranteeExpiryDate: '2027-02-05',
              nextQuarterEndDate: '2025-03-31',
              delegationType: 'A',
              interestOrFeeRate: 10,
              facilityStageCode: '07',
              exposurePeriod: '24',
              creditRatingCode: '14',
              premiumFrequencyCode: '4',
              riskCountryCode: 'GBR',
              riskStatusCode: '03',
              effectiveDate: '2025-02-07',
              forecastPercentage: 100,
              issueDate: '2025-02-07',
              agentBankIdentifier: '00000000',
              obligorPartyIdentifier: '00296147',
              obligorIndustryClassification: '2804',
              probabilityOfDefault: 14.1,
            },
            submittedToACBS: '2025-02-07T09:44:33+00:00',
            receivedFromACBS: '2025-02-07T09:44:37+00:00',
            facilityIdentifier: '0020026666',
          },
          facilityInvestor: {
            status: 201,
            dataSent: {
              maximumLiability: 20000,
              currency: 'GBP',
              guaranteeExpiryDate: '2027-02-05',
              effectiveDate: '2025-02-07',
            },
            submittedToACBS: '2025-02-07T09:44:37+00:00',
            receivedFromACBS: '2025-02-07T09:44:38+00:00',
            facilityIdentifier: '0020026666',
          },
          facilityCovenant: {
            status: 201,
            dataSent: {
              covenantType: '43',
              maximumLiability: 25000,
              currency: 'O',
              guaranteeExpiryDate: '2027-02-05',
              effectiveDate: '2025-02-07',
              covenantIdentifier: '0000007274',
            },
            submittedToACBS: '2025-02-07T09:44:38+00:00',
            receivedFromACBS: '2025-02-07T09:44:40+00:00',
            facilityIdentifier: '0020026666',
          },
          parties: {},
          facilityCovenantChargeable: {
            status: 201,
            dataSent: {
              covenantType: '46',
              maximumLiability: 25000,
              currency: 'O',
              guaranteeExpiryDate: '2027-02-05',
              effectiveDate: '2025-02-07',
              covenantIdentifier: '0000007275',
            },
            submittedToACBS: '2025-02-07T09:44:40+00:00',
            receivedFromACBS: '2025-02-07T09:44:41+00:00',
            facilityIdentifier: '0020026666',
          },
          facilityBondIssuerGuarantee: {
            status: 201,
            dataSent: {
              guarantorParty: '00004333',
              limitKey: '00296147',
              guaranteeExpiryDate: '2027-02-05',
              effectiveDate: '2025-02-07',
              maximumLiability: 20000,
              guaranteeTypeCode: '315',
            },
            submittedToACBS: '2025-02-07T09:44:41+00:00',
            receivedFromACBS: '2025-02-07T09:44:42+00:00',
            facilityIdentifier: '0020026666',
          },
          facilityBondBeneficiaryGuarantee: {
            status: 400,
            dataSent: {
              guarantorParty: '00296147',
              limitKey: '00296147',
              guaranteeExpiryDate: '2027-02-05',
              effectiveDate: '2025-02-07',
              maximumLiability: 20000,
              guaranteeTypeCode: '310',
            },
            submittedToACBS: '2025-02-07T09:44:42+00:00',
            receivedFromACBS: '2025-02-07T09:44:43+00:00',
            error: {
              statusCode: 400,
              message: 'Bad request',
              error: 'Guarantor can not self-guarantee.',
            },
          },
          codeValueTransaction: {
            status: 201,
            dataSent: {
              lenderTypeCode: '100',
              initialBundleStatusCode: 3,
              facilityTransactionCodeValueCode: 'A',
            },
            submittedToACBS: '2025-02-07T09:44:43+00:00',
            receivedFromACBS: '2025-02-07T09:44:45+00:00',
            bundleIdentifier: '0000289693',
          },
          facilityLoan: {
            status: 201,
            dataSent: {
              postingDate: '2025-02-07',
              borrowerPartyIdentifier: '00296147',
              productTypeId: '250',
              productTypeGroup: 'BS',
              currency: 'GBP',
              amount: 20000,
              issueDate: '2025-02-07',
              expiryDate: '2027-02-05',
              spreadRate: 9,
              nextDueDate: '2027-02-05',
              yearBasis: '5',
              loanBillingFrequencyType: 'G',
              spreadRateCtl: 10,
              indexRateChangeFrequency: 'G',
            },
            submittedToACBS: '2025-02-07T09:44:45+00:00',
            receivedFromACBS: '2025-02-07T09:44:53+00:00',
            bundleIdentifier: '0000289694',
          },
          facilityFee: [
            {
              status: 201,
              dataSent: {
                effectiveDate: '2025-02-07',
                amount: 3645,
                expirationDate: '2027-02-06',
                nextDueDate: '2027-02-06',
                nextAccrueToDate: '2027-02-06',
                period: '01',
                currency: 'GBP',
                lenderTypeCode: '100',
                incomeClassCode: 'BPM',
                spreadToInvestorsIndicator: true,
              },
              submittedToACBS: '2025-02-07T09:44:53+00:00',
              receivedFromACBS: '2025-02-07T09:44:57+00:00',
              facilityIdentifier: '0020026666',
            },
          ],
        },
      ],
    },
    createdTime: '2025-02-07T09:43:10Z',
    lastUpdatedTime: '2025-02-07T09:44:57Z',
  },
};

const MOCK_ACBS_FACILITY_LINK = {
  acbsTaskResult: {
    name: 'acbs-issue-facility',
    instanceId: 'c2e8705d3813421385da3bff2073121a',
    runtimeStatus: DURABLE_FUNCTIONS_LOG.STATUS.COMPLETED,
    customStatus: null,
    createdTime: '2024-12-11T16:00:27Z',
    lastUpdatedTime: '2024-12-11T16:00:50Z',
    input: {
      facilityIdentifier: '0041231975',
      amendment: {
        facility: {
          _id: '77e10af22d146b1bb8f0fcf8',
        },
        deal: {},
      },
    },
    output: {
      facilityIdentifier: '0041231975',
      issuedFacilityMaster: {
        status: 200,
        updateType: 'issue',
        submittedToACBS: '2024-09-20T16:00:32+00:00',
        receivedFromACBS: '2024-09-20T16:00:37+00:00',
        dataSent: {
          dealIdentifier: '0041231974',
          facilityIdentifier: '0041231975',
          portfolioIdentifier: 'E1',
          dealBorrowerIdentifier: '001234567',
          maximumLiability: 100000,
          productTypeId: '280',
          capitalConversionFactorCode: '8',
          currency: CURRENCY.GBP,
          guaranteeCommencementDate: '2024-09-20',
          guaranteeExpiryDate: '2025-09-20',
          nextQuarterEndDate: '2024-12-31',
          facilityInitialStatus: 'P',
          facilityOverallStatus: 'A',
          delegationType: 'A',
          interestOrFeeRate: 2.1,
          facilityStageCode: '07',
          exposurePeriod: '22',
          creditRatingCode: '10',
          guaranteePercentage: 75,
          premiumFrequencyCode: '2',
          riskCountryCode: 'GBR',
          riskStatusCode: '03',
          effectiveDate: '2024-09-10',
          forecastPercentage: 100,
          issueDate: '2024-09-20',
          description: 'GEF : 24 Months',
          agentBankIdentifier: '00000000',
          obligorPartyIdentifier: '00123456',
          obligorName: 'TEST',
          obligorIndustryClassification: '1234',
          probabilityOfDefault: 1.0,
          productTypeName: DEAL_TYPE.GEF,
        },
        facilityIdentifier: '0041231975',
      },
      facilityLoan: {
        status: 201,
        dataSent: {
          postingDate: '2024-09-20',
          borrowerPartyIdentifier: '00123456',
          productTypeId: '280',
          productTypeGroup: 'GM',
          currency: CURRENCY.GBP,
          amount: 10000,
          issueDate: '2024-09-20',
          expiryDate: '2025-09-20',
          spreadRate: 1.23,
          nextDueDate: '2025-01-01',
          yearBasis: '1',
          loanBillingFrequencyType: 'E',
        },
        submittedToACBS: '2024-09-20T16:00:37+00:00',
        receivedFromACBS: '2024-09-20T16:00:44+00:00',
        bundleIdentifier: '0000412345',
      },
      facilityFee: {
        status: 201,
        dataSent: {
          effectiveDate: '2024-09-20',
          amount: 3348,
          expirationDate: '2025-09-20',
          nextDueDate: '2025-09-20',
          nextAccrueToDate: '2025-09-20',
          period: '01',
          currency: CURRENCY.GBP,
          lenderTypeCode: '100',
          incomeClassCode: 'FGT',
          spreadToInvestorsIndicator: true,
        },
        submittedToACBS: '2024-09-20T16:00:44+00:00',
        receivedFromACBS: '2024-09-20T16:00:50+00:00',
        facilityIdentifier: '0000412346',
      },
    },
    auditRecord: {
      lastUpdatedAt: '2024-12-13T08:40:00.194 +00:00',
      lastUpdatedByPortalUserId: null,
      lastUpdatedByTfmUserId: null,
      lastUpdatedByIsSystem: true,
      noUserLoggedIn: null,
    },
  },
};

module.exports = {
  MOCK_ACBS_TASK_LINK,
  MOCK_ACBS_DEAL_LINK,
  MOCK_ACBS_FACILITY_LINK,
};
