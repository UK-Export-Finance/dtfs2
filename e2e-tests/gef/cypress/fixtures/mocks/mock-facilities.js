const CONSTANTS = require('../constants');
const dateConstants = require('../../../../e2e-fixtures/dateConstants');

const facilityEndDateEnabled = Number(Cypress.env('GEF_DEAL_VERSION')) >= 1;

/**
 * Gets facility end date properties if enabled on default deal version
 * @returns {Pick<import('@ukef/dtfs2-common').Facility,'isUsingFacilityEndDate' | 'facilityEndDate'> | {} } mock facility end date properties if enabled, or empty object if not
 */
const getFacilityEndDateProperties = () => {
  if (facilityEndDateEnabled) {
    return {
      isUsingFacilityEndDate: true,
      facilityEndDate: new Date(1830297600000),
    };
  }
  return {};
};

exports.MOCK_FACILITY_ONE = {
  ...getFacilityEndDateProperties(),
  type: CONSTANTS.FACILITY_TYPE.CASH,
  hasBeenIssued: false,
  name: 'Facility one',
  shouldCoverStartOnSubmission: true,
  coverStartDate: 1638403200000,
  coverEndDate: '2030-01-01T00:00:00.000Z',
  monthsOfCover: 20,
  details: [
    'Term basis',
    'Revolving or renewing basis',
    'Committed basis',
    'Uncommitted basis',
    'On demand or overdraft basis',
    'Factoring on a  with-recourse basis',
    'Other',
  ],
  detailsOther: 'Other',
  currency: 'GBP',
  value: 2000,
  coverPercentage: 80,
  interestPercentage: 1,
  paymentType: 'IN_ADVANCE_MONTHLY',
  createdAt: 1638363596947,
  updatedAt: 1638442632540,
  ukefExposure: 1600,
  guaranteeFee: 0.9,
  submittedAsIssuedDate: '1638363717231',
  feeType: 'in advance',
  feeFrequency: 'Monthly',
  ukefFacilityId: '10000011',
  dayCountBasis: 365,
  coverDateConfirmed: null,
  canResubmitIssuedFacilities: null,
};

exports.MOCK_FACILITY_TWO = {
  ...getFacilityEndDateProperties(),
  type: CONSTANTS.FACILITY_TYPE.CASH,
  hasBeenIssued: true,
  name: 'Facility two',
  shouldCoverStartOnSubmission: true,
  coverStartDate: 1638403200000,
  coverEndDate: '2030-01-01T00:00:00.000Z',
  monthsOfCover: null,
  details: [
    'Term basis',
    'Revolving or renewing basis',
    'Committed basis',
    'Uncommitted basis',
    'On demand or overdraft basis',
    'Factoring on a  with-recourse basis',
    'Other',
  ],
  detailsOther: 'Other',
  currency: 'GBP',
  value: 2000,
  coverPercentage: 80,
  interestPercentage: 1,
  paymentType: 'IN_ADVANCE_MONTHLY',
  createdAt: 1638363596947,
  updatedAt: 1638442632540,
  ukefExposure: 1600,
  guaranteeFee: 0.9,
  submittedAsIssuedDate: '1638363717231',
  ukefFacilityId: '10000012',
  feeType: 'in advance',
  feeFrequency: 'Monthly',
  dayCountBasis: 365,
  coverDateConfirmed: true,
  canResubmitIssuedFacilities: null,
};

exports.MOCK_FACILITY_TWO_NULL_MIA = {
  ...getFacilityEndDateProperties(),
  type: CONSTANTS.FACILITY_TYPE.CASH,
  hasBeenIssued: true,
  name: 'Facility two',
  shouldCoverStartOnSubmission: true,
  coverStartDate: 1638403200000,
  coverEndDate: dateConstants.tomorrow,
  monthsOfCover: null,
  details: [
    'Term basis',
    'Revolving or renewing basis',
    'Committed basis',
    'Uncommitted basis',
    'On demand or overdraft basis',
    'Factoring on a  with-recourse basis',
    'Other',
  ],
  detailsOther: 'Other',
  currency: 'GBP',
  value: 2000,
  coverPercentage: 80,
  interestPercentage: 1,
  paymentType: 'IN_ADVANCE_MONTHLY',
  createdAt: 1638363596947,
  updatedAt: 1638442632540,
  ukefExposure: 1600,
  guaranteeFee: 0.9,
  submittedAsIssuedDate: null,
  ukefFacilityId: '10000012',
  feeType: 'in advance',
  feeFrequency: 'Monthly',
  dayCountBasis: 365,
  coverDateConfirmed: null,
  canResubmitIssuedFacilities: null,
};

exports.MOCK_FACILITY_THREE = {
  ...getFacilityEndDateProperties(),
  type: CONSTANTS.FACILITY_TYPE.CONTINGENT,
  hasBeenIssued: false,
  name: 'Facility three',
  shouldCoverStartOnSubmission: true,
  coverStartDate: 1638403200000,
  coverEndDate: '2030-01-01T00:00:00.000Z',
  monthsOfCover: 30,
  details: [
    'Term basis',
    'Revolving or renewing basis',
    'Committed basis',
    'Uncommitted basis',
    'On demand or overdraft basis',
    'Factoring on a  with-recourse basis',
    'Other',
  ],
  detailsOther: 'Other',
  currency: 'GBP',
  value: 2000,
  coverPercentage: 80,
  interestPercentage: 1,
  paymentType: 'IN_ADVANCE_MONTHLY',
  createdAt: 1638363596947,
  updatedAt: 1638442632540,
  ukefExposure: 1600,
  guaranteeFee: 0.9,
  submittedAsIssuedDate: '1638363717231',
  ukefFacilityId: '10000013',
  feeType: 'in advance',
  feeFrequency: 'Monthly',
  dayCountBasis: 365,
  coverDateConfirmed: false,
  canResubmitIssuedFacilities: null,
};

exports.MOCK_FACILITY_FOUR = {
  ...getFacilityEndDateProperties(),
  type: CONSTANTS.FACILITY_TYPE.CASH,
  hasBeenIssued: false,
  name: 'Facility four',
  shouldCoverStartOnSubmission: true,
  coverStartDate: 1638403200000,
  coverEndDate: '2030-01-01T00:00:00.000Z',
  monthsOfCover: 6,
  details: [
    'Term basis',
    'Revolving or renewing basis',
    'Committed basis',
    'Uncommitted basis',
    'On demand or overdraft basis',
    'Factoring on a  with-recourse basis',
    'Other',
  ],
  detailsOther: 'Other',
  currency: 'GBP',
  value: 2000,
  coverPercentage: 80,
  interestPercentage: 1,
  paymentType: 'IN_ADVANCE_MONTHLY',
  createdAt: 1638363596947,
  updatedAt: 1638442632540,
  ukefExposure: 1600,
  guaranteeFee: 0.9,
  submittedAsIssuedDate: '1638363717231',
  ukefFacilityId: '10000014',
  feeType: 'in advance',
  feeFrequency: 'Monthly',
  dayCountBasis: 365,
  coverDateConfirmed: false,
  canResubmitIssuedFacilities: null,
};
