{% extends "index.njk" %}
{% from "govuk/components/error-summary/macro.njk" import govukErrorSummary %}
{% from "govuk/components/radios/macro.njk" import govukRadios %}
{% import '_macros/date-field.njk' as dateField %}

{% block content %}

  <h1 class="govuk-heading-l">Confirm Requested Cover Start Date</h1>

  {% if validationErrors.count %}
    {{
      govukErrorSummary({
        titleText: "There is a problem",
        errorList: validationErrors.summary
      })
    }}
  {% endif %}

  <form method="POST" autocomplete="off">

    {{ govukRadios({
      idPrefix: "needToChangeRequestedCoverStartDate",
      name: "needToChangeRequestedCoverStartDate",
      fieldset: {
        legend: {
          text: 'Do you need to change "Requested Cover Start Date"?',
          classes: "govuk-fieldset__legend"
        }
      },
      items: [
        {
          value: "true",
          text: "Yes",
          checked: needToChangeRequestedCoverStartDate === "true",
          attributes: {
            'data-cy': 'need-to-change-cover-start-date-yes'
          }
        },
        {
          value: "false",
          text: "No, keep current date value (" + facility['requestedCoverStartDate-day'] +"/" + facility['requestedCoverStartDate-month'] +"/" + facility['requestedCoverStartDate-year'] +")",
          checked: needToChangeRequestedCoverStartDate === "false"
        }
      ]
    }) }}

    {{ dateField.render(
      legend = 'New Requested Cover Start Date',
      id = 'requestedCoverStartDate',
      hint = 'For example, 27 11 2019',
      error = validationErrors.errorList.requestedCoverStartDate,
      dayValue = enteredValues['requestedCoverStartDate-day'],
      monthValue = enteredValues['requestedCoverStartDate-month'],
      yearValue = enteredValues['requestedCoverStartDate-year']
    )}}

    <button data-cy="submit-button" class="govuk-button govuk-!-margin-right-1" data-module="govuk-button">
      Save
    </button>

    <a href="/contract/{{ dealId }}" role="button" draggable="false" class="govuk-button govuk-button--secondary" data-module="govuk-button">Cancel</a>

  </form>

{% endblock %}
