{% from "govuk/components/button/macro.njk" import govukButton %}

{% macro render(params) %}
  {% if not ["Submitted", "Rejected by UKEF"].includes(params.deal.details.status) and params.user.roles.includes('maker') %}

    {% if ["Draft", "Further Maker's input required"].includes(params.deal.details.status) and params.dealFormsCompleted %}

      {{ govukButton({
        "disabled": false,
        "text": "Proceed to review",
        "attributes" : {
          "data-cy" : "ProceedToReview"
        },
        "href": "/contract/" + params.deal._id + "/ready-for-review"
      }) }}

    {% elseif ["Ready for Checker's approval"].includes(params.deal.details.status) and params.dealFormsCompleted %}

      {{ govukButton({
        "disabled": true,
        "text": "Proceed to review",
        "attributes" : {
          "data-cy" : "ProceedToReview"
        },
        "href": ""
      }) }}

    {% elseif  ["Draft", "Further Maker's input required", "Ready for Checker's approval", "Abandoned Deal", "Acknowledged by UKEF", "Accepted by UKEF (without conditions)", "Accepted by UKEF (with conditions)"].includes(params.deal.details.status) and not params.dealFormsCompleted and not params.dealHasIssuedFacilitiesToSubmit %}

      {{ govukButton({
        "disabled": true,
        "text": "Proceed to review",
        "attributes" : {
          "data-cy" : "ProceedToReview"
        },
        "href": ""
      }) }}

    {% elseif ["Acknowledged by UKEF", "Ready for Checker's approval"].includes(params.deal.details.status) and params.dealHasIssuedFacilitiesToSubmit %}
      {{ govukButton({
        "disabled": false,
        "text": "Proceed to review",
        "attributes" : {
          "data-cy" : "ProceedToReview"
        },
        "href": "/contract/" + params.deal._id + "/ready-for-review"
      }) }}

    {% endif %}

  {% endif %}
{% endmacro %}
