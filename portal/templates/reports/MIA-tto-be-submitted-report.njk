{% extends "index.njk" %}
{% import '_macros/pagination.njk' as pagination %}

{% block pageTitle %}Unissued Transactions Report{% endblock %}

{% block content %}

  <h1 class="govuk-heading-l">Unissued Transactions Report</h1>


  <table class="govuk-table govuk-!-margin-bottom-0">
    <thead class="govuk-table__head">
      <tr class="govuk-table__row">
        <th scope="col" class="govuk-table__header govuk-!-font-size-14">Bank Supply Contract ID</th>
        <th scope="col" class="govuk-table__header govuk-!-font-size-14">UKEF Deal ID</th>
        <th scope="col" class="govuk-table__header govuk-!-font-size-14">Created by</th>
        <th scope="col" class="govuk-table__header govuk-!-font-size-14">Submitted by</th>
        <th scope="col" class="govuk-table__header govuk-!-font-size-14">MIA created</th>
        <th scope="col" class="govuk-table__header govuk-!-font-size-14">MIA submitted</th>
        <th scope="col" class="govuk-table__header govuk-!-font-size-14">MIA approval by UKEF</th>
        <th scope="col" class="govuk-table__header govuk-!-font-size-14">Business days to submit</th>
      </tr>
    </thead>
Supply contract ID 
Transaction id
Transaction type
Supplier name
Facility value
Facility stage
Created by
Facility submission date
Calendar days to issue
    <tbody class="govuk-table__body">
    deal_id: '1000002',
      deal_status: 'Acknowledged by UKEF',
      deal_supplierName: 'TEST',
      deal_bankSupplyContractID: 'MIA-Msstar-BSS-DGR-2',
      deal_ukefDealId: '20010739',
      deal_owningBank: 'Barclays Bank',
      deal_created: '1596808493548',
      deal_submissionDate: null,
      transaction_id: '2',
      bankFacilityId: 'unique12',
      ukefFacilityId: '12345678',
      transactionType: 'loan',
      facilityValue: null,
      transactionStage: 'Conditional',
      createdDate: '1596189840084',
      lastEdited: null,
      issuedDate: null,
      maker: 'Mock DataLoader',
      checker: 'Emilio Largo',
      issueFacilityDetailsSubmitted: null,
      __typename: 'Transaction'
      {% for transaction in transactions %}
        <tr data-cy="transaction_{{transaction._id}}" class="govuk-table__row">
          <td data-cy="bankSupplyContractID" class="govuk-table__cell govuk-!-font-size-14">
            <a href="/contract/{{ transaction.deal._id }}" class="govuk-link" data-cy="bankSupplyContractIDLink">{{ transaction.deal_bankSupplyContractID }}</a>
          </td>

          <td data-cy="status" class="govuk-table__cell govuk-!-font-size-14">
            {{ transaction.deal.details.status }}
          </td>

          <td data-cy="transactionType" class="govuk-table__cell govuk-!-font-size-14">
            {{ transaction.transactionType }}
          </td>

          <td data-cy="deal_supplierName" class="govuk-table__cell govuk-!-font-size-14">
            {{ transaction.deal_supplierName }}
          </td>

          <td data-cy="facilityValue" class="govuk-table__cell govuk-!-font-size-14">
            {{ transaction.facilityValue }}
          </td>

          <td data-cy="transactionStage" class="govuk-table__cell govuk-!-font-size-14">
            {{ transaction.transactionStage }}
          </td>

          <td data-cy="maker" class="govuk-table__cell govuk-!-font-size-14">
          {{ transaction.maker }}
          </td>

          <td data-cy="deal_submissionDate" class="govuk-table__cell govuk-!-font-size-14">
            {{ transaction.deal_submissionDate  }}
          </td>

        </tr>
      {% endfor %}

    </tbody>

  </table>

  {{ pagination.pagination(totalPages = pages.totalPages, currentPage = pages.currentPage, totalItems = pages.totalItems, paginationRoot = '/reports/transactions-report') }}

{% endblock %}
