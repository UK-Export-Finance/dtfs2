{% extends "index.njk" %}
{% import '_macros/confirm-eligibility-nav.njk' as confirmEligibility %}
{% from "govuk/components/file-upload/macro.njk" import govukFileUpload %}
{% from "govuk/components/character-count/macro.njk" import govukCharacterCount %}

{% block content %}

  {{ confirmEligibility.nav(
    completedStatus = eligibility.completedStatus,
    current = 'supportingDocumentation',
    contractId = _id
  )}}

  <hr class="govuk-section-break govuk-section-break--visible govuk-!-margin-bottom-8">

  <form method="POST" autocomplete="off" enctype="multipart/form-data">

    <ol class="govuk-list govuk-list--number">
    <li class="govuk-form-group govuk-!-margin-bottom-8">
      {{ govukFileUpload({
        id: "exporterQuestionnaire",
        name: "exporterQuestionnaire",
        label: {
          text: "Manual Inclusion Questionnaire"
        },
        hint: {
          html: 'Please upload a completed Manual Inclusion Questionnaire. You can download the template here: <a href="#">Manual Inclusion Questionnaire</a>'
        },
        attributes: {
          multiple: true,
          accept: '.gif, .jpg, .jpeg, .png, .bmp, .tif, .txt, .pdf, .doc, .docx, .ppt, .pptx, .xls, .xlsx, .msg, .zip'
        }
      }) }}

        {% if dealFiles.exporterQuestionnaire | length %}
       <input type="submit" class="govuk-button govuk-!-margin-right-1" data-module="govuk-button" value="Remove selected" />

        <div class="govuk-form-group">
          <fieldset class="govuk-fieldset" aria-describedby="delete-hint-exporter-questionnaire">
            <legend class="govuk-fieldset__legend govuk-fieldset__legend--s">
              <h1 class="govuk-fieldset__heading">
                Select files to delete
              </h1>
            </legend>
            <div class="govuk-checkboxes">
              {% for exporterQuestionnaire in dealFiles.exporterQuestionnaire %}
                    <div class="govuk-checkboxes__item">
                      <input class="govuk-checkboxes__input" id="delete-hint-exporter-questionnaire-{{ loop.index }}" name="deleteFile" type="checkbox" value="{{ exporterQuestionnaire.fullPath }}">
                      <label class="govuk-label govuk-checkboxes__label">
                        <a href="{{ fileshareURL }}{{ exporterQuestionnaire.fullPath}}" target="_blank">{{exporterQuestionnaire.filename}}</a>
                      </label>
                    </div>
              {% endfor %}
            </div>
          </fieldset>
        </div>
        {% endif %}
    </li>

    <li class="govuk-form-group govuk-!-margin-bottom-8">
        {{ govukFileUpload({
          id: "financialStatements",
          name: "financial-statements",
          label: {
            text: "Financial statements for the past 3 years"
          },
          hint: {
            text: 'Financial statements (audited if available) for the past 3 years, including a Profit & Loss, Balance Sheet and Cash Flow Statement, (with notes, if applicable). If the company is part of a larger group, separate accounts should be provided for the company and group.'
          },
          attributes: {
            multiple: true,
            accept: '.gif, .jpg, .jpeg, .png, .bmp, .tif, .txt, .pdf, .doc, .docx, .ppt, .pptx, .xls, .xlsx, .msg, .zip'
          }
        }) }}
    </li>

    <li class="govuk-form-group govuk-!-margin-bottom-8">
      {{ govukCharacterCount({
          name: "security",
          id: "security",
          maxlength: 300,
          label: {
            text: "Security"
          },
          hint: {
             text: 'Details of the overarching general facility taken by the bank in relation to the exporter, for example debenture, fixed and floating charge, but not including any security that is specific to the Transaction.'
          }
        }) }}
    </li>

    </ol>

    <div class="govuk-grid-row govuk-!-margin-0">
      <div class="govuk-grid-column-full">

        <input type="submit" class="govuk-button govuk-!-margin-right-1" data-module="govuk-button" value="Preview" />

        <input
          type="submit"
          formaction="/contract/{{ _id }}/eligibility/supporting-documentation/save-go-back"
          class="govuk-button govuk-button--secondary"
          data-module="govuk-button"
          value="Save and go back to deal"
        />

      </div>
    </div>
  
  </form>

{% endblock %}
